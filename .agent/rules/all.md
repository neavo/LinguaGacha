---
trigger: always_on
---

1. 原则
- 关键逻辑必须写单行注释解释为什么
- KISS (简单)、YAGNI (拒过度设计)、防御性编程
- 拒绝过度设计：仅解决当前问题，拒绝非必要通用抽象及复杂设计模式

2. 命名
- 优先使用枚举值，禁止使用魔术数/魔术字符串
- 强制跟随文件现有风格，无参考默认 `snake_case`
- 变量名须意图明确，函数名必含动词：
  - ❌ `data` `info`
  - ✅ `user_profile` `get_status`

3. 风格
- 严禁深层 `if` 嵌套，必须优先使用 Early Returns
- DRY策略：代码重复 <3 次保留以降低阅读负担，≥3 次才提取函数

4. 健壮性
- 零信任：假定入参可能为 `None`，必须处理边缘情况
- 显式报错：严禁吞没错误 (Empty Catch)
- 不可变性：修改对象/数组时优先返回副本，避免 Mutation

5. 其他
- 全程使用简体中文回复
- 先给方案，用户确认后才能执行

6. Python
- 使用 `uv` 管理和运行 Python 项目
- 必须：
  - 标注类型
- 优先：
  - f-string
  - 列表推导式
  - Top-level Imports